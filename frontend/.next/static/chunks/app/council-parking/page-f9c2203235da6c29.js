(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6442:function(e,a,t){Promise.resolve().then(t.bind(t,6059))},6059:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var s=t(7437),r=t(2265),l=t(3464);function c(){let[e,a]=(0,r.useState)({street:"",area:""}),[t,c]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[d,i]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(""),b=async()=>{p("");try{let a=await l.Z.get("/api/council-spaces/search",{params:{street:e.street,area:e.area}});c(a.data.data.spaces)}catch(e){p("Failed to fetch council parking spaces.")}},x=async()=>{p(""),i(""),h(null);try{let e=await l.Z.post("/api/council-spaces/validate-code",{code:n});i(e.data.data.qrCodeUrl),h(e.data.data.space)}catch(e){p("Invalid or inactive council parking code.")}};return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Find Council Parking Spaces"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block mb-2 font-semibold",children:"Search by Street or Area"}),(0,s.jsx)("input",{type:"text",placeholder:"Street",value:e.street,onChange:t=>a({...e,street:t.target.value}),className:"border p-2 rounded mr-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Area",value:e.area,onChange:t=>a({...e,area:t.target.value}),className:"border p-2 rounded mr-2"}),(0,s.jsx)("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Search"})]}),m&&(0,s.jsx)("p",{className:"text-red-600 mb-4",children:m}),t.length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Available Council Spaces"}),(0,s.jsx)("ul",{className:"border rounded p-4 max-h-64 overflow-auto",children:t.map(e=>(0,s.jsxs)("li",{className:"cursor-pointer p-2 hover:bg-gray-100",onClick:()=>{h(e),i(""),o(""),p("")},children:[e.street,", ",e.area," - \xa3",e.pricePerHour.toFixed(2)," per hour"]},e.id))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block mb-2 font-semibold",children:"Enter Code from Sign"}),(0,s.jsx)("input",{type:"text",placeholder:"Enter code",value:n,onChange:e=>o(e.target.value),className:"border p-2 rounded mr-2"}),(0,s.jsx)("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:!n,children:"Generate QR Code"})]}),u&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Selected Space"}),(0,s.jsxs)("p",{children:[u.street,", ",u.area," - \xa3",u.pricePerHour.toFixed(2)," per hour"]})]}),d&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Your QR Code"}),(0,s.jsx)("img",{src:d,alt:"QR Code",className:"w-48 h-48"})]})]})}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=6442)}),_N_E=e.O()}]);