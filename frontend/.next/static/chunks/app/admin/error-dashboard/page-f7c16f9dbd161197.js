(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{9118:function(e,t,s){Promise.resolve().then(s.bind(s,8660))},257:function(e,t,s){"use strict";var r,a;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,r,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var o=[],c=!1,d=-1;function m(){c&&r&&(c=!1,r.length?o=r.concat(o):d=-1,o.length&&u())}function u(){if(!c){var e=l(m);c=!0;for(var t=o.length;t;){for(r=o,o=[];++d<t;)r&&r[d].run();d=-1,t=o.length}r=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new x(e,t)),1!==o.length||c||l(u)},x.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function r(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}},i=!0;try{t[e](n,n.exports,r),i=!1}finally{i&&delete s[e]}return n.exports}r.ab="//";var a=r(229);e.exports=a}()},8660:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),a=s(2265),n=s(8022),i=s(74),l=s(1673);let o=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";function c(){let{user:e,token:t}=(0,n.a)(),{success:s,error:c}=(0,i.p)(),{showLoading:d,hideLoading:m}=(0,l.r)(),[u,x]=(0,a.useState)([]),[h,p]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[f,j]=(0,a.useState)({page:1,limit:50,severity:"",resolved:"",search:"",days:7}),[v,N]=(0,a.useState)(`You are an expert software engineer analyzing error logs for a parking booking platform called EasyParkNow. 

Your task is to:
1. Analyze the provided error logs
2. Identify patterns and common issues
3. Categorize errors by severity and type
4. Provide actionable recommendations for fixes
5. Highlight any critical issues that need immediate attention

Please provide a comprehensive summary with insights and recommendations.`),[b,w]=(0,a.useState)(!1),[A,C]=(0,a.useState)(""),[I,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(e&&"ADMIN"!==e.role){c("Access Denied","You must be an admin to access this page");return}},[e]);let S=async()=>{try{let e=new URLSearchParams;Object.entries(f).forEach(t=>{let[s,r]=t;r&&e.append(s,r.toString())});let s=await fetch(`${o}/error-logs?${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch error logs");let r=await s.json();x(r.data.errorLogs)}catch(e){c("Error","Failed to fetch error logs"),console.error("Error fetching logs:",e)}},k=async()=>{try{let e=await fetch(`${o}/error-logs/stats?days=${f.days}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch error stats");let s=await e.json();p(s.data)}catch(e){c("Error","Failed to fetch error statistics"),console.error("Error fetching stats:",e)}},T=async()=>{if(!A){E(!0),c("API Key Required","Please provide your OpenRouter API key to use AI features");return}try{d("Generating AI summary...");let e=await fetch(`${o}/error-logs/ai-summary`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","X-OpenRouter-API-Key":A},body:JSON.stringify({days:f.days,limit:100,systemPrompt:v})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to generate AI summary")}let r=await e.json();y(r.data),s("AI Summary Generated","Error analysis completed successfully")}catch(e){c("AI Error",e instanceof Error?e.message:"Failed to generate AI summary"),console.error("AI summary error:",e)}finally{m()}},R=async(e,r)=>{try{if(!(await fetch(`${o}/error-logs/${e}/resolve`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({resolved:r})})).ok)throw Error("Failed to update error status");s("Success",`Error ${r?"resolved":"reopened"}`),S(),k()}catch(e){c("Error","Failed to update error status"),console.error("Error updating status:",e)}};(0,a.useEffect)(()=>{e?.role==="ADMIN"&&t&&(S(),k())},[e,t,f]);let L=e=>(0,r.jsx)("span",{className:`badge ${{CRITICAL:"badge-error",ERROR:"badge-warning",WARNING:"badge-secondary",INFO:"badge-primary"}[e]}`,children:e});return e?.role!=="ADMIN"?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You must be an admin to access this page."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Error Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"AI-powered error monitoring and analysis"})]}),I&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"OpenRouter API Key Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"To use AI-powered error analysis, please provide your OpenRouter API key:"}),(0,r.jsx)("input",{type:"password",value:A,onChange:e=>C(e.target.value),placeholder:"Enter your OpenRouter API key",className:"input w-full mb-4"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{E(!1),A&&T()},className:"btn btn-primary flex-1",disabled:!A,children:"Save & Generate"}),(0,r.jsx)("button",{onClick:()=>E(!1),className:"btn btn-outline flex-1",children:"Cancel"})]})]})}),h&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Total Errors"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:h.totalErrors}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Last ",h.period]})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Resolved"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:h.resolvedCount}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[h.totalErrors>0?Math.round(h.resolvedCount/h.totalErrors*100):0,"% resolution rate"]})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Unresolved"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:h.unresolvedCount}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Needs attention"})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Critical Issues"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:h.errorsBySeverity.CRITICAL||0}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"High priority"})]})})]}),(0,r.jsxs)("div",{className:"card mb-8",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"card-title",children:"AI-Powered Error Analysis"}),(0,r.jsx)("p",{className:"card-description",children:"Get intelligent insights and recommendations for your error logs"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>w(!b),className:"btn btn-outline btn-sm",children:[b?"Hide":"Edit"," Prompt"]}),(0,r.jsx)("button",{onClick:T,className:"btn btn-primary btn-sm",children:"Generate AI Summary"})]})]})}),(0,r.jsxs)("div",{className:"card-content",children:[b&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"System Prompt (Customize AI behavior)"}),(0,r.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),rows:8,className:"input w-full font-mono text-sm",placeholder:"Enter your custom system prompt..."})]}),g?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Summary"}),(0,r.jsx)("p",{className:"text-gray-700",children:g.summary})]}),g.criticalIssues&&g.criticalIssues.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-red-600",children:"Critical Issues"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1",children:g.criticalIssues.map((e,t)=>(0,r.jsx)("li",{className:"text-gray-700",children:e},t))})]}),g.recommendations&&g.recommendations.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-600",children:"Recommendations"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1",children:g.recommendations.map((e,t)=>(0,r.jsx)("li",{className:"text-gray-700",children:e},t))})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Analysis generated on ",new Date(g.generatedAt).toLocaleString(),"• ",g.errorCount," errors analyzed • ",g.period]})]}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,r.jsx)("p",{children:'Click "Generate AI Summary" to analyze your error logs with AI'})})]})]}),(0,r.jsx)("div",{className:"card mb-6",children:(0,r.jsx)("div",{className:"card-content",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),(0,r.jsxs)("select",{value:f.severity,onChange:e=>j({...f,severity:e.target.value}),className:"input",children:[(0,r.jsx)("option",{value:"",children:"All Severities"}),(0,r.jsx)("option",{value:"CRITICAL",children:"Critical"}),(0,r.jsx)("option",{value:"ERROR",children:"Error"}),(0,r.jsx)("option",{value:"WARNING",children:"Warning"}),(0,r.jsx)("option",{value:"INFO",children:"Info"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{value:f.resolved,onChange:e=>j({...f,resolved:e.target.value}),className:"input",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"false",children:"Unresolved"}),(0,r.jsx)("option",{value:"true",children:"Resolved"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),(0,r.jsxs)("select",{value:f.days,onChange:e=>j({...f,days:parseInt(e.target.value)}),className:"input",children:[(0,r.jsx)("option",{value:1,children:"Last 24 hours"}),(0,r.jsx)("option",{value:7,children:"Last 7 days"}),(0,r.jsx)("option",{value:30,children:"Last 30 days"}),(0,r.jsx)("option",{value:90,children:"Last 90 days"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,r.jsx)("input",{type:"text",value:f.search,onChange:e=>j({...f,search:e.target.value}),placeholder:"Search errors...",className:"input"})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:()=>{S(),k()},className:"btn btn-primary w-full",children:"Apply Filters"})})]})})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"card-header",children:[(0,r.jsx)("h2",{className:"card-title",children:"Error Logs"}),(0,r.jsx)("p",{className:"card-description",children:"Recent application errors and their details"})]}),(0,r.jsx)("div",{className:"card-content",children:u.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Timestamp"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Severity"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Message"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"User"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:u.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString()}),(0,r.jsx)("td",{className:"py-3 px-4",children:L(e.severity)}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900 max-w-md truncate",children:e.message}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.user?`${e.user.firstName} ${e.user.lastName}`:"Anonymous"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`badge ${e.resolved?"badge-success":"badge-warning"}`,children:e.resolved?"Resolved":"Open"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("button",{onClick:()=>R(e.id,!e.resolved),className:`btn btn-sm ${e.resolved?"btn-outline":"btn-success"}`,children:e.resolved?"Reopen":"Resolve"})})]},e.id))})]})}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,r.jsx)("p",{children:"No error logs found matching your criteria"})})})]})]})})}},1673:function(e,t,s){"use strict";s.d(t,{LoadingProvider:function(){return l},r:function(){return i}});var r=s(7437),a=s(2265);let n=(0,a.createContext)(void 0),i=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e},l=e=>{let{children:t}=e,[s,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)("Loading..."),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading...";i(e),c(t)};return(0,r.jsxs)(n.Provider,{value:{isLoading:s,loadingMessage:l,setLoading:d,showLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";d(!0,e)},hideLoading:()=>{d(!1)}},children:[t,s&&(0,r.jsx)(o,{message:l})]})},o=e=>{let{message:t}=e;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"spinner w-6 h-6"}),(0,r.jsx)("span",{className:"text-gray-700 font-medium",children:t})]})})})}},74:function(e,t,s){"use strict";s.d(t,{ToastProvider:function(){return l},p:function(){return i}});var r=s(7437),a=s(2265);let n=(0,a.createContext)(void 0),i=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e},l=e=>{let{children:t}=e,[s,i]=(0,a.useState)([]),l=e=>{let t=Math.random().toString(36).substr(2,9),s={...e,id:t};i(e=>[...e,s]),setTimeout(()=>{c(t)},e.duration||5e3)},c=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,r.jsxs)(n.Provider,{value:{toasts:s,showToast:l,removeToast:c,success:(e,t)=>{l({type:"success",title:e,message:t})},error:(e,t)=>{l({type:"error",title:e,message:t})},warning:(e,t)=>{l({type:"warning",title:e,message:t})},info:(e,t)=>{l({type:"info",title:e,message:t})}},children:[t,(0,r.jsx)(o,{toasts:s,onRemove:c})]})},o=e=>{let{toasts:t,onRemove:s}=e;return 0===t.length?null:(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,r.jsx)(c,{toast:e,onRemove:s},e.id))})},c=e=>{let{toast:t,onRemove:s}=e;return(0,r.jsx)("div",{className:`
        max-w-sm w-full border rounded-lg p-4 shadow-lg animate-slide-down
        ${(()=>{switch(t.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()}
      `,children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-lg",children:(()=>{switch(t.type){case"success":return"✓";case"error":return"✕";case"warning":return"⚠";case"info":return"ℹ";default:return""}})()})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:t.title}),t.message&&(0,r.jsx)("p",{className:"mt-1 text-sm opacity-90",children:t.message})]}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,r.jsxs)("button",{onClick:()=>s(t.id),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("span",{className:"text-lg",children:"\xd7"})]})})]})})}}},function(e){e.O(0,[58,971,117,744],function(){return e(e.s=9118)}),_N_E=e.O()}]);