exports.id=917,exports.ids=[917],exports.modules={8917:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},650:(e,r,t)=>{Promise.resolve().then(t.bind(t,8776)),Promise.resolve().then(t.bind(t,8594)),Promise.resolve().then(t.bind(t,6716)),Promise.resolve().then(t.bind(t,4781))},8776:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var s=t(326),a=t(7577);class o extends a.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsx("div",{className:"max-w-md w-full",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl text-red-600",children:"âš "})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or contact support if the problem persists."}),(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("button",{onClick:this.handleRetry,className:"btn btn-primary btn-md w-full",children:"Try Again"}),s.jsx("button",{onClick:this.handleReload,className:"btn btn-outline btn-md w-full",children:"Reload Page"})]}),!1]})})}):this.props.children}}let n=o},8594:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>u,a:()=>c});var s=t(326),a=t(7577),o=t(5047);class n{constructor(){this.token=null,this.errorQueue=[],this.isOnline=navigator.onLine,this.maxQueueSize=100,this.batchSize=10,this.flushInterval=3e4,this.retryDelay=5e3,this.errorCache=new Set,this.cacheExpiry=3e5,this.apiUrl=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",this.setupEventListeners(),this.startPeriodicFlush(),this.loadQueueFromStorage()}setToken(e){this.token=e}setupEventListeners(){window.addEventListener("error",e=>{this.logError({message:e.message,stack:e.error?.stack,url:e.filename,severity:"ERROR",metadata:{lineno:e.lineno,colno:e.colno,type:"javascript_error"}})}),window.addEventListener("unhandledrejection",e=>{this.logError({message:`Unhandled Promise Rejection: ${e.reason}`,stack:e.reason?.stack,severity:"ERROR",metadata:{type:"promise_rejection",reason:e.reason}})}),window.addEventListener("online",()=>{this.isOnline=!0,this.flushQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1}),window.addEventListener("beforeunload",()=>{this.saveQueueToStorage(),this.errorQueue.length>0&&this.sendBeacon()})}logError(e){let r={id:this.generateId(),message:e.message,stack:e.stack,url:e.url||window.location.href,userAgent:navigator.userAgent,timestamp:e.timestamp||new Date().toISOString(),severity:e.severity||"ERROR",metadata:{...e.metadata,viewport:{width:window.innerWidth,height:window.innerHeight},screen:{width:screen.width,height:screen.height}},attempts:0,maxAttempts:3},t=this.hashError(r);!this.errorCache.has(t)&&(this.errorCache.add(t),setTimeout(()=>{this.errorCache.delete(t)},this.cacheExpiry),this.addToQueue(r),this.isOnline&&this.flushQueue())}logApiError(e,r){this.logError({message:`API Error: ${e.status} ${e.statusText}`,url:e.url,severity:e.status>=500?"ERROR":"WARNING",metadata:{type:"api_error",status:e.status,statusText:e.statusText,requestData:r?JSON.stringify(r).substring(0,1e3):void 0}})}logNetworkError(e,r){this.logError({message:`Network Error: ${e.message}`,stack:e.stack,url:r,severity:"ERROR",metadata:{type:"network_error",name:e.name}})}logUserActionError(e,r,t){this.logError({message:`User Action Error: ${e} - ${r.message}`,stack:r.stack,severity:"WARNING",metadata:{type:"user_action_error",action:e,context:t}})}addToQueue(e){this.errorQueue.length>=this.maxQueueSize&&this.errorQueue.shift(),this.errorQueue.push(e)}async flushQueue(){if(this.isOnline&&0!==this.errorQueue.length&&this.token)for(let e of this.errorQueue.splice(0,this.batchSize))try{await this.sendError(e)}catch(r){e.attempts++,e.attempts<e.maxAttempts?this.errorQueue.unshift(e):console.warn("Failed to send error after max attempts:",e.message)}}async sendError(e){let r=await fetch(`${this.apiUrl}/error-logs`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({message:e.message,stack:e.stack,url:e.url,userAgent:e.userAgent,timestamp:e.timestamp,severity:e.severity,metadata:e.metadata})});if(!r.ok)throw Error(`Failed to send error: ${r.status}`)}sendBeacon(){if(!this.token||0===this.errorQueue.length)return;let e=JSON.stringify({errors:this.errorQueue.map(e=>({message:e.message,stack:e.stack,url:e.url,userAgent:e.userAgent,timestamp:e.timestamp,severity:e.severity,metadata:e.metadata}))});navigator.sendBeacon(`${this.apiUrl}/error-logs/batch`,e)}startPeriodicFlush(){setInterval(()=>{this.flushQueue()},this.flushInterval)}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}hashError(e){return btoa(`${e.message}-${e.url}-${e.stack?.split("\n")[0]||""}`).replace(/[^a-zA-Z0-9]/g,"").substring(0,32)}saveQueueToStorage(){try{localStorage.setItem("errorQueue",JSON.stringify(this.errorQueue))}catch(e){console.warn("Failed to save error queue to storage:",e)}}loadQueueFromStorage(){try{let e=localStorage.getItem("errorQueue");e&&(this.errorQueue=JSON.parse(e),localStorage.removeItem("errorQueue"))}catch(e){console.warn("Failed to load error queue from storage:",e)}}clearQueue(){this.errorQueue=[],this.errorCache.clear(),localStorage.removeItem("errorQueue")}getQueueStatus(){return{queueLength:this.errorQueue.length,isOnline:this.isOnline,hasToken:!!this.token}}}let i=new n,l=e=>i.setToken(e),d=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},h=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",u=({children:e})=>{let[r,t]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),m=(0,o.useRouter)(),g=!!r&&!!n;(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("auth_token"),r=localStorage.getItem("auth_user");e&&r&&(i(e),t(JSON.parse(r)),l(e),await p(e))}catch(e){console.error("Auth initialization error:",e),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}finally{u(!1)}})()},[]);let p=async e=>{try{let r=await fetch(`${h}/auth/me`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok)throw Error("Token verification failed");let s=await r.json();if(s.success&&s.data.user)t(s.data.user);else throw Error("Invalid user data")}catch(e){throw console.error("Token verification error:",e),i(null),t(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),e}},x=async(e,r)=>{try{u(!0);let s=await fetch(`${h}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await s.json();if(!s.ok)throw Error(a.message||"Login failed");if(a.success&&a.data.user&&a.data.token){let{user:e,token:r}=a.data;t(e),i(r),l(r),localStorage.setItem("auth_token",r),localStorage.setItem("auth_user",JSON.stringify(e));let s="ADMIN"===e.role?"/admin":"/dashboard";m.push(s)}else throw Error("Invalid response data")}catch(e){throw console.error("Login error:",e),e}finally{u(!1)}},f=async e=>{try{u(!0);let r=await fetch(`${h}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await r.json();if(!r.ok)throw Error(s.message||"Registration failed");if(s.success&&s.data.user&&s.data.token){let{user:e,token:r}=s.data;t(e),i(r),l(r),localStorage.setItem("auth_token",r),localStorage.setItem("auth_user",JSON.stringify(e)),m.push("/dashboard")}else throw Error("Invalid response data")}catch(e){throw console.error("Registration error:",e),e}finally{u(!1)}},v=()=>{t(null),i(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),m.push("/")},w=async()=>{try{if(!n)throw Error("No token available");let e=await fetch(`${h}/auth/refresh`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}),r=await e.json();if(!e.ok)throw Error(r.message||"Token refresh failed");if(r.success&&r.data.token){let e=r.data.token;i(e),localStorage.setItem("auth_token",e)}else throw Error("Invalid refresh response")}catch(e){throw console.error("Token refresh error:",e),v(),e}};return(0,a.useEffect)(()=>{if(n)try{let e=JSON.parse(atob(n.split(".")[1])),r=1e3*e.exp,t=Date.now(),s=r-t-3e5;if(s>0){let e=setTimeout(()=>{w().catch(console.error)},s);return()=>clearTimeout(e)}v()}catch(e){console.error("Token parsing error:",e),v()}},[n]),s.jsx(d.Provider,{value:{user:r,token:n,isLoading:c,isAuthenticated:g,login:x,register:f,logout:v,updateUser:e=>{if(r){let s={...r,...e};t(s),localStorage.setItem("auth_user",JSON.stringify(s))}},refreshToken:w},children:e})}},6716:(e,r,t)=>{"use strict";t.d(r,{LoadingProvider:()=>i,r:()=>n});var s=t(326),a=t(7577);let o=(0,a.createContext)(void 0),n=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e},i=({children:e})=>{let[r,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)("Loading..."),d=(e,r="Loading...")=>{t(e),i(r)};return(0,s.jsxs)(o.Provider,{value:{isLoading:r,loadingMessage:n,setLoading:d,showLoading:(e="Loading...")=>{d(!0,e)},hideLoading:()=>{d(!1)}},children:[e,r&&s.jsx(l,{message:n})]})},l=({message:e})=>s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"spinner w-6 h-6"}),s.jsx("span",{className:"text-gray-700 font-medium",children:e})]})})})},4781:(e,r,t)=>{"use strict";t.d(r,{ToastProvider:()=>i,p:()=>n});var s=t(326),a=t(7577);let o=(0,a.createContext)(void 0),n=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e},i=({children:e})=>{let[r,t]=(0,a.useState)([]),n=e=>{let r=Math.random().toString(36).substr(2,9),s={...e,id:r};t(e=>[...e,s]),setTimeout(()=>{i(r)},e.duration||5e3)},i=e=>{t(r=>r.filter(r=>r.id!==e))};return(0,s.jsxs)(o.Provider,{value:{toasts:r,showToast:n,removeToast:i,success:(e,r)=>{n({type:"success",title:e,message:r})},error:(e,r)=>{n({type:"error",title:e,message:r})},warning:(e,r)=>{n({type:"warning",title:e,message:r})},info:(e,r)=>{n({type:"info",title:e,message:r})}},children:[e,s.jsx(l,{toasts:r,onRemove:i})]})},l=({toasts:e,onRemove:r})=>0===e.length?null:s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>s.jsx(d,{toast:e,onRemove:r},e.id))}),d=({toast:e,onRemove:r})=>s.jsx("div",{className:`
        max-w-sm w-full border rounded-lg p-4 shadow-lg animate-slide-down
        ${(()=>{switch(e.type){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()}
      `,children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:(()=>{switch(e.type){case"success":return"âœ“";case"error":return"âœ•";case"warning":return"âš ";case"info":return"â„¹";default:return""}})()})}),(0,s.jsxs)("div",{className:"ml-3 flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:e.title}),e.message&&s.jsx("p",{className:"mt-1 text-sm opacity-90",children:e.message})]}),s.jsx("div",{className:"ml-4 flex-shrink-0",children:(0,s.jsxs)("button",{onClick:()=>r(e.id),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx("span",{className:"text-lg",children:"\xd7"})]})})]})})},5754:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>d});var s=t(9510);t(5023);var a=t(8570);(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/AuthProvider.tsx#useAuth`);let o=(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/AuthProvider.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/AuthProvider.tsx#withAuth`),(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/ToastProvider.tsx#useToast`);let n=(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/ToastProvider.tsx#ToastProvider`);(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/LoadingProvider.tsx#useLoading`);let i=(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/providers/LoadingProvider.tsx#LoadingProvider`),l=(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/components/ErrorBoundary.tsx#default`);(0,a.createProxy)(String.raw`/project/sandbox/user-workspace/frontend/src/components/ErrorBoundary.tsx#withErrorBoundary`);let d={title:{default:"EasyParkNow - Find & Book Parking Spaces",template:"%s | EasyParkNow"},description:"Find and book parking spaces instantly or earn money by renting out your driveway. Join thousands of drivers and space owners using EasyParkNow.",keywords:["parking","book parking","find parking","parking spaces","driveway rental","parking app","UK parking","London parking"]};function c({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap",rel:"stylesheet"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"}),s.jsx("meta",{name:"theme-color",content:"#2563eb"}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"})]}),(0,s.jsxs)("body",{className:"font-inter antialiased bg-white text-gray-900",children:[s.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50",children:"Skip to main content"}),s.jsx(l,{children:s.jsx(o,{children:s.jsx(i,{children:s.jsx(n,{children:s.jsx("div",{id:"main-content",className:"min-h-screen flex flex-col",children:e})})})})}),s.jsx("div",{id:"modal-root"}),s.jsx("div",{id:"tooltip-root"})]})]})}},5023:()=>{}};